# Оптимизация минус-слов - Модуль анализа

## Описание функционала

Модуль для глубокого анализа поисковых запросов с целью определения нецелевого трафика и оптимизации рекламных кампаний.

## Логика работы

### 1. Классификация запросов

**Три категории:**
- **Целевые** - запросы от потенциальных клиентов, готовых к покупке/заявке
- **Нецелевые** - запросы НЕ от целевой аудитории (конкуренты, вакансии, обучение, бесплатное, скачать, отзывы, форумы, работа)
- **Под вопросом** - неоднозначные запросы, требующие дополнительного мониторинга

### 2. Анализ метрик

Для каждого запроса анализируются:

**2.1. Цена клика (CPC)**
- Сравнение со средней по нише
- Критерий: CPC > средней на 50%+ = дорого

**2.2. Показатель отказов (Bounce Rate)**
- Оценка качества трафика
- Критерий: Отказы > 70% = плохо

**2.3. Цена цели (Conversion Cost)**
- Эффективность конверсии
- Критерии:
  - Цена конверсии > целевой в 2+ раза = неэффективно
  - Нет конверсий при большом расходе = в минус

### 3. Рекомендации

**Три типа рекомендаций:**

1. **В минус-слова**
   - Явно нецелевой трафик
   - Плохие метрики (высокие отказы, нет конверсий, дорого)
   - Приоритет: высокий/средний/низкий

2. **Оптимизировать**
   - Целевой запрос, но дорогой
   - Высокие отказы на целевом трафике
   - Действия: снизить ставку, улучшить посадочную страницу

3. **Оставить**
   - Целевой трафик с хорошими метриками
   - Приемлемая цена конверсии
   - Нормальный уровень отказов

### 4. Приоритезация

**Приоритеты для минус-слов:**
- **Высокий** - явно нецелевой + большой расход
- **Средний** - под вопросом + средний расход
- **Низкий** - небольшой расход, но нецелевой

## API Endpoints

### POST /api/minus-words/analyze

**Request:**
```json
{
  "queries": [
    {
      "query": "яндекс директ цена",
      "clicks": 45,
      "cost": 2250,
      "bounceRate": 65,
      "conversions": 3,
      "conversionCost": 750
    }
  ],
  "niche": "контекстная реклама",
  "businessInfo": "агентство контекстной рекламы"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "analysis": [
      {
        "query": "яндекс директ цена",
        "category": "целевой",
        "reasoning": "Запрос от потенциального клиента...",
        "recommendation": "оставить",
        "priority": "средний",
        "metrics": {
          "cpc": 50,
          "bounceRate": 65,
          "conversionCost": 750
        }
      }
    ],
    "report": {
      "summary": {
        "total": 1,
        "toMinus": 0,
        "toOptimize": 0,
        "toKeep": 1
      },
      "recommendations": {...}
    },
    "minusWords": []
  }
}
```

## Формат входных данных

### Загрузка из файла (CSV/Excel)

Ожидаемые колонки:
- `Запрос` / `Query` - текст поискового запроса
- `Клики` / `Clicks` - количество кликов
- `Расход` / `Cost` - общий расход в рублях
- `Отказы %` / `Bounce Rate` - процент отказов
- `Конверсии` / `Conversions` - количество конверсий
- `Цена конверсии` / `Conversion Cost` - стоимость одной конверсии

## Использование

1. Загрузите CSV/Excel с поисковыми запросами из Яндекс.Директ
2. Укажите нишу бизнеса и описание
3. Получите анализ с классификацией
4. Экспортируйте готовый список минус-слов
5. Следуйте рекомендациям по оптимизации

## Примеры нецелевых запросов

- Работа, вакансии (яндекс директ вакансии)
- Обучение (курсы яндекс директ)
- Бесплатное (бесплатная настройка)
- Отзывы (яндекс директ отзывы)
- Конкуренты (google ads, mytarget)
- Скачать (скачать шаблон)
- Форумы, статьи (как работает яндекс директ)
